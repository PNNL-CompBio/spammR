<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot network of correlated features — spatial_network • spammR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot network of correlated features — spatial_network"><meta name="description" content="spatial_network() Creates a network for a given
SpatialExperiment object (spe) based on the correlation of features. Will
return a fully connect graph"><meta property="og:description" content="spatial_network() Creates a network for a given
SpatialExperiment object (spe) based on the correlation of features. Will
return a fully connect graph"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spammR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.17</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/lipidProt.html">spammR lipidomic and proteomic integration</a></li>
    <li><a class="dropdown-item" href="../articles/spatMicrobiome.html">spammR microbiome evaluation</a></li>
    <li><a class="dropdown-item" href="../articles/spatProt.html">spammR Spatial Proteomics Example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot network of correlated features</h1>

      <div class="d-none name"><code>spatial_network.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>spatial_network()</code> Creates a network for a given
SpatialExperiment object (spe) based on the correlation of features. Will
return a fully connect graph</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spatial_network</span><span class="op">(</span></span>
<span>  <span class="va">spe</span>,</span>
<span>  <span class="va">assay_names</span>,</span>
<span>  feature_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  query_features <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target_features <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"spearman"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-spe">spe<a class="anchor" aria-label="anchor" href="#arg-spe"></a></dt>
<dd><p>SpatialExperiment (SPE) object</p></dd>


<dt id="arg-assay-names">assay_names<a class="anchor" aria-label="anchor" href="#arg-assay-names"></a></dt>
<dd><p>Name of assay in the spe object that contains
data to be plotted. If only one it will focus on features in the first
assay. If more than one it will compute correlations across all features.</p></dd>


<dt id="arg-feature-names">feature_names<a class="anchor" aria-label="anchor" href="#arg-feature-names"></a></dt>
<dd><p>will describe which value to use for node names. IF
missing will use rownames</p></dd>


<dt id="arg-query-features">query_features<a class="anchor" aria-label="anchor" href="#arg-query-features"></a></dt>
<dd><p>List of features to query for correlation. If there
are no <code>target_featres</code> will build a network between this feature all other
nodes. If missing, correlation will be computed between all nodes in
<code>target_features</code>.</p></dd>


<dt id="arg-target-features">target_features<a class="anchor" aria-label="anchor" href="#arg-target-features"></a></dt>
<dd><p>List of features to compute correlation across. If
<code>query_features</code> is not NULL, will compute correlation only between these
features and the <code>query_features</code>. Otherwise, it will compute correlation
between all features in this list. DEFAULT: all features in spe.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>to use for correlation, default is <code>spearman</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code>tidygraph</code> object that can be used for plotting or analysis</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Using the feature values, the algorithm computes the correlation
between them across space, filtes by <code>lowest_thresh</code> (in the interest of
compute time) and then selects the most correlated edges using the
<code>top_edges</code> parameter.</p>
<p>Only the largest connected component is plotted, but the entire
graph is returned as an <code>tidygraph</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pancMeta</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">smallPancData</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">protMeta</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">img0.spe</span> <span class="op">&lt;-</span> <span class="fu"><a href="convert_to_spe.html">convert_to_spe</a></span><span class="op">(</span><span class="va">smallPancData</span><span class="op">$</span><span class="va">Image_0</span>,</span></span>
<span class="r-in"><span>  <span class="va">pancMeta</span>,</span></span>
<span class="r-in"><span>  <span class="va">protMeta</span>,</span></span>
<span class="r-in"><span>  feature_meta_colname <span class="op">=</span> <span class="st">"pancProts"</span>,</span></span>
<span class="r-in"><span>  image_files <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Image_0.png"</span>, package <span class="op">=</span> <span class="st">"spammR"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  spatial_coords_colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_pixels"</span>, <span class="st">"y_pixels"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sample_id <span class="op">=</span> <span class="st">"Image0"</span>,</span></span>
<span class="r-in"><span>  image_ids <span class="op">=</span> <span class="st">"with_grid"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Note: Only mapping metadata for 2986 features out of 3000 data points</span>
<span class="r-in"><span><span class="co">#get 10 most variable features</span></span></span>
<span class="r-in"><span><span class="va">vp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/SummarizedExperiment/man/SummarizedExperiment-class.html" class="external-link">assay</a></span><span class="op">(</span><span class="va">img0.spe</span><span class="op">)</span>,<span class="fl">1</span>,<span class="va">var</span><span class="op">)</span>,decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co">##now call the network</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">spatial_network</span><span class="op">(</span><span class="va">img0.spe</span>,<span class="st">'proteomics'</span>, target_features<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">vp</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(rowval)`</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sara Gosline.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

